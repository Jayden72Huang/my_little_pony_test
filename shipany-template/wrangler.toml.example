# ================================================================================
#  Wrangler 配置文件 - Cloudflare Workers 部署配置
# ================================================================================
#  📋 文件功能：配置 Next.js 应用部署到 Cloudflare Workers 的各项参数
#  🎯 文件目的：定义应用名称、资源绑定、环境变量等部署配置
#  📝 使用说明：复制此文件为 wrangler.toml 并填写实际配置值
# ================================================================================

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 基础配置                                                                     │
# └─────────────────────────────────────────────────────────────────────────────┘

# ⚠️ 【必须修改】应用名称
name = "your-app-name"

# ✅ 【无需修改】Worker 入口文件（由 OpenNext 自动生成）
main = ".open-next/worker.js"

# ✅ 【无需修改】Cloudflare Workers 兼容日期
compatibility_date = "2025-03-01"

# ✅ 【无需修改】启用 Node.js 兼容模式
compatibility_flags = ["nodejs_compat"]


# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 静态资源配置                                                                 │
# └─────────────────────────────────────────────────────────────────────────────┘

[assets]
binding   = "ASSETS"                # ✅ 无需修改
directory = ".open-next/assets"     # ✅ 无需修改


# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ Hyperdrive 数据库加速配置                                                    │
# │ 说明：Cloudflare 的数据库连接加速服务，可显著降低跨区域访问延迟              │
# └─────────────────────────────────────────────────────────────────────────────┘

[[hyperdrive]]
binding                = "HYPERDRIVE"   # ✅ 无需修改
id                     = ""             # ⚠️ 【必须填写】在 Cloudflare 控制台创建
localConnectionString  = ""             # ⚠️ 【必须填写】本地开发数据库连接


# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 可观测性配置                                                                 │
# └─────────────────────────────────────────────────────────────────────────────┘

[observability]
enabled = true   # ✅ 无需修改 - 启用日志和监控


# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 环境变量配置                                                                 │
# └─────────────────────────────────────────────────────────────────────────────┘

[vars]

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 应用基础配置
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

NEXT_PUBLIC_APP_URL  = "http://localhost:3000"   # ⚠️ 【必须修改】生产域名
NEXT_PUBLIC_APP_NAME = "Your App Name"           # ⚠️ 【必须修改】应用名称


# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 主题与外观配置
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

NEXT_PUBLIC_THEME      = "default"   # 📝 【可选】主题名称
NEXT_PUBLIC_APPEARANCE = "system"    # 📝 【可选】外观模式 (system/light/dark)


# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 数据库配置
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

DATABASE_PROVIDER      = "postgresql"   # 📝 【可选】数据库类型 (postgresql/mysql/sqlite)
DATABASE_URL           = ""             # ⚠️ 【必须填写】格式: postgresql://user:password@host:port/database
DB_SINGLETON_ENABLED   = "true"         # ✅ 无需修改 - Workers 环境推荐
DB_MAX_CONNECTIONS     = "1"            # ✅ 无需修改 - Workers 环境建议为 1


# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 认证配置
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# ⚠️ 【必须填写】生成命令: openssl rand -base64 32
AUTH_SECRET = ""
